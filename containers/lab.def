Bootstrap: localimage
From: containers/base.sif

%files
   requirements.txt

%post
   #! /bin/bash
   # download miniconda
   apt-get -y update
   
   su - dsbpredict

   # setup path
   /home/dsbpredict/miniconda3/bin/conda create -n X-CRISP python=3.8

   /home/dsbpredict/miniconda3/bin/conda --version

   # install requirements
   /home/dsbpredict/miniconda3/envs/X-CRISP/bin/python3 -m pip install -r requirements.txt

   # clean
   /home/dsbpredict/miniconda3/bin/conda clean -afy

%environment
   export LC_ALL=C
   export PATH=/home/dsbpredict/miniconda3/bin:$PATH